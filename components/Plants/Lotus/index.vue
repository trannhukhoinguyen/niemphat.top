<template>
  <div class="lotus-wrapper" :style="{top: top, left: left}">
    <div class="lotus">
      <ul>
        <!-- Repeat 8 times -->
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>

        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
      </ul>
    </div>

    <div class="lotus">
      <ul>
        <!-- Repeat 6 times -->
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>

        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
      </ul>
    </div>

    <div class="lotus">
      <ul>
        <!-- Repeat 3 times -->
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
        <li>
          <svg viewBox="0 0 72 200">
            <path
              filter="url(#dropShadow1)"
              d="M0,100 C0,66.6666667 12,33.3333333 36,0 C60,33.3333333 72,66.666667 72,100 C72,133.333333 60,166.666667 36,200 C12,166.666667 0,133.333333 0,100 Z"
            ></path>
          </svg>
        </li>
      </ul>
    </div>

    <svg class="gradient">
      <defs>
        <radialGradient
          cx="50%"
          cy="5%"
          fx="50%"
          fy="5%"
          r="110%"
          id="gradient"
        >
          <stop offset="0%" stop-color="#FCFDF2" />
          <stop offset="50%" stop-color="yellow" v-if="isYellowLotus" />
          <stop offset="100%" stop-color="#DB87D4" v-if="isPinkLotus" />
        </radialGradient>
        <filter id="dropShadow1">
          <feDropShadow dx="1" dy="1" stdDeviation="1" flood-opacity="0.4" />
        </filter>
      </defs>
    </svg>
  </div>
</template>

<script lang="ts" setup>
const props = defineProps({
  isYellowLotus: {
    type: Boolean,
    default: false,
  },
  isPinkLotus: {
    type: Boolean,
    default: true,
  },
  top: {
    type: String,
    default: true,
  },
  left: {
    type: String,
    default: true,
  },
});
</script>

<style lang="scss" scoped>
.lotus-wrapper {
  position: relative;
  z-index: 2;

  body {
    width: 33%;
    perspective: 1000px;
    background: #363a3f;
  }

  body,
  div,
  ul,
  li {
    backface-visibility: hidden;
  }
  div,
  ul,
  li,
  svg {
    will-change: transform;
    transform-style: preserve-3d;
  }
  li,
  svg {
    transform-origin: center top;
  }

  .gradient {
    opacity: 0;
    height: 0;
    width: 0;
  }

  .lotus {
    transform-origin: center center;
    transform: rotateX(70deg);
    animation: rotate 20000ms linear infinite forwards;
    position: absolute;
    top: calc(50% - 18px);
    left: calc(50% - 18px);
    width: 18px;
    height: 18px;
    ul {
      position: relative;
      width: 18px;
      height: 18px;
    }
    li {
      position: absolute;
      svg {
        display: block;
        height: auto;
        path {
          fill: url(#gradient);
        }
      }
    }
    &:nth-child(1) {
      li {
        top: 18px;
        left: calc(50% - 18px);
        @for $i from 1 through 8 {
          &:nth-child(#{$i}) {
            transform: rotateZ(#{$i * 45}deg) rotateX(15deg) rotateY(5deg);
          }
        }
        svg {
          width: 36px;
          transform: rotateX(75deg);
          animation: bloom 1000ms cubic-bezier(0, 0.75, 0.25, 1) forwards;
        }
      }
    }
    &:nth-child(2) {
      li {
        top: 15px;
        left: calc(50% - 15px);
        @for $i from 1 through 6 {
          &:nth-child(#{$i}) {
            transform: rotateZ(#{$i * 60}deg) rotateX(30deg) rotateY(5deg);
          }
        }
        svg {
          width: 30px;
          transform: rotateX(60deg);
          animation: bloom 1100ms cubic-bezier(0, 0.75, 0.25, 1) 150ms forwards;
        }
      }
    }
    &:nth-child(3) {
      li {
        top: 12px;
        left: calc(50% - 12px);
        @for $i from 1 through 3 {
          &:nth-child(#{$i}) {
            transform: rotateZ(#{$i * 120}deg) rotateX(60deg) rotateY(5deg);
          }
        }
        svg {
          width: 24px;
          transform: rotateX(30deg);
          animation: bloom 1200ms cubic-bezier(0, 0.75, 0.25, 1) 300ms forwards;
        }
      }
    }
  }

  @keyframes rotate {
    from {
      transform: rotateX(70deg) rotateZ(0deg);
    }
    to {
      transform: rotateX(70deg) rotateZ(360deg);
    }
  }
  @keyframes bloom {
    to {
      transform: none;
    }
  }
}
</style>
